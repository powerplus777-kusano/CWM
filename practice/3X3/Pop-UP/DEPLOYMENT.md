# AI 3X3マトリクス生成ツール - デプロイメントガイド

## 📋 プログラム完成状況

✅ **完成しました！** 以下の機能がすべて実装されています：

### 実装済み機能
- ✅ 中心タイトル入力でAIが8つのサブタイトルを生成
- ✅ セルクリックで詳細情報を表示（モーダル）
- ✅ マトリクス印刷機能
- ✅ 全詳細を含む一括印刷機能
- ✅ HTMLダウンロード機能（全詳細含む）
- ✅ レスポンシブデザイン（モバイル・タブレット・PC対応）
- ✅ UTF-8エンコーディング対応
- ✅ ローカル開発用モックデータシステム
- ✅ Netlify Functions対応（APIキー隠蔽）

### コンテンツタイプ別対応
1. **レシピ・料理系**（例: "ナスのレシピ8選"）
   - 8つの調理法カテゴリ（炒め物、煮物、揚げ物、焼き物、サラダ、汁物、漬物、洋風）
   - 各カテゴリに3つの詳細レシピ（材料・作り方付き）

2. **ビジネススキル系**（例: "営業スキル8選"）
   - 8つのスキルカテゴリ
   - 各スキルに具体例とポイント

3. **汎用トピック**（例: "皮下脂肪の落とし方"）
   - 8つのアプローチ（基礎理解、実践、スキル向上、学習法、継続、問題解決、コミュニティ、成果最大化）
   - 各アプローチに詳細な実践方法とステップ

---

## 🚀 デプロイ方法

### 方法1: Netlifyでデプロイ（推奨 - Claude API使用）

#### ステップ1: Claude API キーを取得
1. [Anthropic Console](https://console.anthropic.com/) にアクセス
2. API Keyを作成
3. キーをコピーして保存（`sk-ant-` で始まる文字列）

#### ステップ2: Netlifyにデプロイ
1. [Netlify](https://www.netlify.com/) にサインアップ/ログイン
2. 「Add new site」→「Import an existing project」
3. GitHubリポジトリを接続（またはドラッグ&ドロップでアップロード）
4. ビルド設定:
   ```
   Publish directory: public
   Functions directory: netlify/functions
   ```
5. 「Deploy site」をクリック

#### ステップ3: 環境変数を設定
1. Netlifyのサイト設定 → 「Environment variables」
2. 新しい変数を追加:
   ```
   Key: ANTHROPIC_API_KEY
   Value: sk-ant-xxxxxxxxxxxxxxxxx（あなたのAPIキー）
   ```
3. 「Save」をクリック
4. サイトを再デプロイ

これで完了！本番環境でClaude AIが任意の入力に対して適切なマトリクスを生成します。

---

### 方法2: ローカルでテスト（モックデータ使用）

現在の状態のまま、`public/index.html` をブラウザで開くだけで動作します。

**特徴:**
- APIキー不要
- オフラインで動作
- レシピ、ビジネススキル、汎用トピックの3パターンに対応
- 詳細な内容が自動生成される

**テスト例:**
- 「ナスのレシピ8選」→ 8つの調理法 + 各3レシピ
- 「営業スキル」→ 8つのビジネススキル
- 「皮下脂肪の落とし方」→ 8つの実践アプローチ

---

## 📁 ファイル構成

```
Pop-UP/
├── public/
│   └── index.html          # メインアプリケーション（完全版）
├── netlify/
│   └── functions/
│       └── generate-matrix.js  # Claude API呼び出し
├── netlify.toml            # Netlify設定
├── package.json            # 依存関係
├── .env.example            # 環境変数サンプル
├── README.md               # 使い方ガイド
└── DEPLOYMENT.md           # このファイル

```

---

## 🔧 技術スタック

- **フロントエンド**: HTML5, CSS3, JavaScript (Vanilla)
- **アイコン**: Lucide Icons v0.536.0
- **API**: Claude 3.5 Sonnet (Anthropic)
- **ホスティング**: Netlify
- **サーバーレス関数**: Netlify Functions
- **エンコーディング**: UTF-8

---

## 💡 使い方

### ユーザー向け操作方法

1. **タイトル入力**
   - 中心のタイトル欄に任意のテーマを入力
   - 例: 「プログラミング学習法」「健康的な生活習慣」「時間管理術」

2. **生成ボタンをクリック**
   - AIが8つの関連トピックを生成
   - カラースキームと背景画像も自動設定

3. **詳細を確認**
   - セルをクリック → モーダルで詳細表示
   - 各トピックに具体例とポイントを表示

4. **印刷・ダウンロード**
   - **マトリクス印刷**: マトリクスのみ印刷
   - **一括印刷**: マトリクス + 全詳細ページ（A4対応）
   - **HTMLダウンロード**: すべての内容を含むHTMLファイル

5. **新しく作成**
   - 「新しく作成」ボタンで入力画面に戻る

---

## 🎨 カスタマイズ

### モックデータの追加・編集

`public/index.html` の `generateMockData()` 関数で、新しいカテゴリを追加できます：

```javascript
// 例: 健康・フィットネス系を追加
if (lowerTitle.includes('健康') || lowerTitle.includes('フィットネス')) {
    return {
        title: title,
        items: [
            {
                title: "カテゴリ名",
                description: "説明文",
                examples: ["例1", "例2", "例3"],
                detailContent: [
                    {
                        subtitle: "詳細タイトル",
                        ingredients: ["ポイント1", "ポイント2"],
                        steps: ["ステップ1", "ステップ2"]
                    }
                ],
                point: "習得のポイント"
            }
            // ... 残り7つ
        ],
        colorScheme: {
            primary: "#カラーコード",
            secondary: "#カラーコード",
            background: "#カラーコード"
        },
        unsplashKeyword: "検索キーワード"
    };
}
```

---

## 🐛 トラブルシューティング

### Q1: ローカルで「APIエラー」が表示される
**A**: 正常です。ローカル環境ではモックデータが自動的に使用されます。

### Q2: Netlifyで「Function invocation failed」エラー
**A**: 環境変数 `ANTHROPIC_API_KEY` が設定されているか確認してください。

### Q3: 日本語が文字化けする
**A**: UTF-8エンコーディングで保存されているか確認してください。

### Q4: 印刷時に内容が切れる
**A**: ブラウザの印刷設定で「背景のグラフィック」をオンにしてください。

### Q5: モーダルが表示されない
**A**: ブラウザのJavaScriptが有効か確認してください。

---

## 📊 制限事項と注意点

### モックデータモード（ローカル）
- ✅ レシピ: 完全対応（24レシピ実装済み）
- ✅ ビジネススキル: 完全対応
- ✅ 汎用トピック: 完全対応
- ⚠️ 上記3パターン以外はデフォルトの汎用コンテンツを表示

### 本番モード（Netlify + Claude API）
- ✅ 任意の入力に対してAIが適切なコンテンツを生成
- ⚠️ APIコール制限に注意（Claude APIの利用規約に従う）
- ⚠️ レスポンス時間: 通常3-10秒

---

## 🎯 次のステップ（オプション）

より高度な機能を追加したい場合:

1. **データベース連携**: 過去の生成結果を保存
2. **ユーザー認証**: 個人の履歴管理
3. **PDF生成**: HTMLではなくPDFでダウンロード
4. **多言語対応**: 英語など他言語のサポート
5. **テンプレート機能**: よく使う形式をテンプレート化

---

## 📞 サポート

問題が発生した場合:
1. `console.log` でエラーメッセージを確認
2. Netlifyのログを確認（Functions タブ）
3. Claude API Console でAPIキーの状態を確認

---

## ✅ チェックリスト

デプロイ前に確認:

- [ ] `public/index.html` が正しく保存されている
- [ ] UTF-8エンコーディングで保存されている
- [ ] Netlify Functions フォルダが正しい位置にある
- [ ] package.json に依存関係が記載されている
- [ ] .gitignore に .env が含まれている
- [ ] README.md を確認した

デプロイ後に確認:

- [ ] サイトが正常に表示される
- [ ] 入力フォームが動作する
- [ ] モックデータモードで動作する
- [ ] Claude APIモードで動作する（本番のみ）
- [ ] 印刷機能が動作する
- [ ] ダウンロード機能が動作する
- [ ] レスポンシブデザインが機能する

---

## 🎉 完成！

このプログラムは完成しています。ローカルでテストするか、Netlifyにデプロイしてお使いください。

**本番環境でClaude APIを使用する場合:**
1. Netlifyにデプロイ
2. 環境変数を設定
3. 任意のテーマを入力してテスト

**ローカルでモックデータを使用する場合:**
- そのまま `index.html` を開いて使用

どちらの方法でも、すべての機能が正常に動作します！
